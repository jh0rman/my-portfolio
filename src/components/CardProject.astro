---
import { t } from 'i18next'
const { project, reverse } = Astro.props

const response = await fetch(`https://api.github.com/repos/${project.github_name}`)
const repository = await response.json()
---

<div class='flex ai:center gap:40' class:list={{ 'flex:col-reverse': reverse }}>
  {project.images.length > 0 && (
    <div class={`img flex:1|1|0% relative m:16 z:-1 bg:${project.color}/.1:before b:${project.color}/.1:before`}>
      <img class="w:full square obj:cover r:24 shadow rotate(-1deg)" src={project.images[0]} alt="desc" draggable="false" />
    </div>
  )}
  <div class='flex:1|1|0% flex flex:col'>
    <h3 class="f:14 f:bold">{project.name}</h3>
    <p class="f:12 flex-grow:1">{repository?.description}</p>
    <ul class="flex flex:wrap gap:8 f:12 f:gray">
      <!-- {repository?.topics.map((topic: string) => (
        <li>#{topic}</li>
      ))} -->
    </ul>
    <div class="flex gap:16 mt:8 f:14 {bg:navy/.1;f:navy;r:12}>a:hover">
      <a href={'repository?.html_url'} target="_blank" rel="noreferrer">
        {t('source')}
      </a>
      {project.demo && (
        <a href={'repository?.homepage'} target="_blank" rel="noreferrer">
          Demo
        </a>
      )}
      {project.npm && (
        <a href={project.npm} target="_blank" rel="noreferrer">
          <img class="h:16 w:16" src="/svg/npm.svg" alt="npm" />
          npm
        </a>
      )}
    </div>
  </div>
</div>

<style>
  .img::before {
    content: '';
    width: 110%;
    height: 100%;
    position: absolute;
    border-radius: 24px;
    transform: rotate(3deg);
    border-bottom-width: 1px;
    z-index: -1;
    left: -5%;
    right: -5%;
  }
  a {
    display: flex;
    align-items: center;
    gap: 8px;
    padding: 12px;
  }
</style>
