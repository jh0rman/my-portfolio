---
import { t } from 'i18next'
const { project } = Astro.props

const response = await fetch(`https://api.github.com/repos/${project.github_name}`)
const repository = await response.json()
---

{project.images.length > 0 && (
  <div class="img relative m-4">
    <img class="w-full aspect-square object-cover rounded-2xl shadow-lg relative z-10" src={project.images[0]} alt="desc" draggable="false" />
  </div>
)}
<div class='flex flex-col border-2 dark:border-neutral-700 rounded-xl overflow-hidden'>
  <div class='flex-grow flex flex-col p-4 pt-3'>
    <h3 class="text-md font-bold">{project.name}</h3>
    <p class="text-sm flex-grow">{repository?.description}</p>
    <div class="break-words space-x-2 text-xs text-gray-400">
      {repository?.topics.map(topic => (
        <a>#{topic}</a>
      ))}
    </div>
    <div class="flex gap-4 mt-2 text-sm">
      <a class="flex items-center gap-1 hover:underline" href={'repository?.html_url'} target="_blank" rel="noreferrer">
        <img class="h-4 w-4 dark:invert" src="/svg/github.svg" alt="source" />
        {t('source')}
      </a>
      {project.demo && (
        <a class="flex items-center gap-1 hover:underline" href={'repository?.homepage'} target="_blank" rel="noreferrer">
          <img class="h-4 w-4" src="/svg/coding.svg" alt="demo" />
          Demo
        </a>
      )}
      {project.npm && (
        <a class="flex items-center gap-1 hover:underline" href={project.npm} target="_blank" rel="noreferrer">
          <img class="h-4 w-4" src="/svg/npm.svg" alt="npm" />
          npm
        </a>
      )}
    </div>
  </div>
</div>

<style>
  .img {
    @apply after:w-[110%] after:h-full;
    @apply after:absolute after:top-0 after:left-[-5%];
    @apply after:rounded-2xl after:rotate-3 after:bg-[#F6EFDB];
  }
</style>
