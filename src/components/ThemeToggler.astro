<label class="theme-toggle w-14 h-14 rounded-xl bg-navy/10 hover:bg-navy/20 p-4" title="Toggle theme">
  <input id="themeToggle" type="checkbox" />
  <span class="theme-toggle-sr">Toggle theme</span>
  <svg
    xmlns="http://www.w3.org/2000/svg"
    aria-hidden="true"
    width="100%"
    height="100%"
    fill="currentColor"
    class="theme-toggle__simple"
    viewBox="0 0 32 32"
  >
    <clipPath id="theme-toggle__simple__cutout">
      <path d="M0-5h55v37h-55zm32 12a1 1 0 0025 0 1 1 0 00-25 0" />
    </clipPath>
    <g clip-path="url(#theme-toggle__simple__cutout)">
      <circle cx="16" cy="16" r="15" />
    </g>
  </svg>
</label>

<script>
  if (localStorage.theme === 'dark' || (!('theme' in localStorage) && window.matchMedia('(prefers-color-scheme: dark)').matches)) {
    document.documentElement.classList.add('dark')
  } else {
    document.documentElement.classList.remove('dark')
  }

  const themeCheckbox = document.getElementById('themeToggle') as HTMLInputElement
  themeCheckbox.checked = document.documentElement.classList.contains('dark')

  const handleToggleClick = () => {
    const darkMode = themeCheckbox.checked
    if (darkMode) {
      document.documentElement.classList.add('dark')
      localStorage.setItem('theme', 'dark')
    } else {
      document.documentElement.classList.remove('dark')
      localStorage.setItem('theme', 'light')
    }
  }

  themeCheckbox.addEventListener('change', handleToggleClick)
</script>
